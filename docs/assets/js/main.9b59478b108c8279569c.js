!function(e){function t(t){for(var n,c,i=t[0],u=t[1],l=t[2],f=0,d=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(s&&s(t);d.length;)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(n=!1)}n&&(a.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={0:0},a=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;a.push([121,1]),r()}({121:function(e,t,r){r(122),e.exports=r(309)},308:function(e,t,r){},309:function(e,t,r){"use strict";function n(e,t,r,n,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a,c,i;return t=e,r=null,a=[{key:"getData",value:(c=regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Something went wrong");case 6:return e.next=8,r.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),i=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=c.apply(e,t);function i(e){n(a,r,o,i,u,"next",e)}function u(e){n(a,r,o,i,u,"throw",e)}i(void 0)}))},function(e){return i.apply(this,arguments)})}],r&&o(t.prototype,r),a&&o(t,a),e}(),c={pednding:"Ожидается",out_of_stock:"Нет в наличии",in_stock:"В наличии",delete:"Удалить"},i=function(e){return c[e]};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ceils=["title","year","color","status","price","delete","description"],this.data=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.data),this.parrent=t.parrent,this.onDelete=t.onDelete}var t,r,n;return t=e,(r=[{key:"create",value:function(){var e=this,t=document.createElement("div");return t.classList.add("table-row"),this.ceils.map((function(t){var r=document.createElement("div");switch(r.classList.add("table-ceil","table-".concat(t)),t){case"color":var n=document.createElement("div");n.classList.add("color","".concat(e.data[t])),r.appendChild(n);break;case"delete":var o=document.createElement("button");o.innerText=i("delete"),o.addEventListener("click",(function(){return e.onDelete(e.data)})),r.appendChild(o);break;case"status":r.innerText=i(e.data[t]);break;case"price":r.innerHTML=function(e){var t=parseFloat(e);if(t&&!isNaN(t))return"".concat(new Intl.NumberFormat("ru-RU").format(t)," руб.")}(e.data[t]);break;default:r.innerText=e.data[t]||""}return r})).forEach((function(e){t.appendChild(e)})),t}},{key:"render",value:function(){var e=this.create();this.parrent.appendChild(e)}}])&&s(t.prototype,r),n&&s(t,n),e}();function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={title:"",year:"",price:"",description:"",color:"",status:""},y=function(e,t){var r=p({},b),n=null,o=e.querySelectorAll("input"),a=e.querySelector(".add-block__colors"),c=e.querySelectorAll(".color-item"),i=e.querySelector(".add-block__select-status"),u=e.querySelectorAll(".select-body-item"),l=i.querySelector(".select-title"),s=function(t){(e.querySelector("input[name=".concat(t.target.name,"]")).classList.remove("error"),r[t.target.name])||e.querySelector("label[for=".concat(t.target.name,"]")).classList.toggle("active")},f=function(e){var t=e.target,n=t.name,o=t.value;r[n]=o.trim()},d=function(){n&&(n.classList.remove("active"),n=null)},v=function(e){a.classList.remove("error"),d(),(n=e.currentTarget).classList.add("active"),r.color=n.dataset.color},y=function(e){e.stopPropagation(),r.status=e.target.dataset.status,l.innerText=e.target.innerText,i.classList.toggle("open")};e.addEventListener("submit",(function(n){n.preventDefault();var c=!0;if(Object.keys(r).forEach((function(t){if(!r[t]){switch(t){case"color":a.classList.add("error");break;case"status":i.classList.add("error");break;default:e.querySelector("input[name=".concat(t,"]")).classList.add("error")}c=!1}})),c){var u="".concat(Date.now()).concat(Math.ceil(1e3*Math.random()));t(p(p({},r),{},{id:u})),r=p({},b),o.forEach((function(e){e.value=""})),d(),l.innerText="Статус"}})),o.forEach((function(e){e.addEventListener("focus",s),e.addEventListener("blur",s),e.addEventListener("input",f)})),c.forEach((function(e){e.addEventListener("click",v)})),i.addEventListener("click",(function(){i.classList.toggle("open")})),u.forEach((function(e){e.addEventListener("click",y)}))};r(308);function h(e,t,r,n,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}var m=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,n,o,c,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=document.getElementById("table-body"),n=document.getElementById("add-block-form"),o=document.createElement("div"),c=function(){r.innerHTML="",t.forEach((function(e){new f({data:e,parrent:r,onDelete:i}).render()}))},i=function(e){var r=e.id;t=t.filter((function(e){return e.id!==r})),c()},u=function(e){t.push(e),c()},o.classList.add("fill-row"),o.innerText="Loading...",r.appendChild(o),e.prev=10,e.next=13,a.getData("https://rawgit.com/Varinetz/e6cbadec972e76a340c41a65fcc2a6b3/raw/90191826a3bac2ff0761040ed1d95c59f14eaf26/frontend_test_table.json");case 13:(t=e.sent)&&(o.remove(),c()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(10),console.error(e.t0),o.innerText="Error";case 21:y(n,u);case 22:case"end":return e.stop()}}),e,null,[[10,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){h(a,n,o,c,i,"next",e)}function i(e){h(a,n,o,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",m)}});